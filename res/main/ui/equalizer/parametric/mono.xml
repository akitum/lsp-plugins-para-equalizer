<plugin resizable="true">
	<ui:eval id="num_filters" value="(ex :ft_16) ? 32 : 16" />
	<ui:eval id="num_blocks" value="(ex :ft_16) ? 4 : 2" />
	
	<grid rows="2" cols="3" spacing="4">
		<vbox spacing="4" expand="true">
			<!-- Signal meters -->
			<hbox spacing="4">
				<ledmeter hexpand="true" angle="0">
					<ledchannel id="im" min="-36 db" max="+6 db" log="true" type="rms_peak"
						peak.visibility="true" 
						value.color="mid_channel" />
				</ledmeter>
				<label text="labels.input:db" />
				<void min_width="64" />
				<label text="labels.output:db" />
				<ledmeter hexpand="true" angle="0">
					<ledchannel id="sm" min="-36 db" max="+6 db" log="true" type="rms_peak"
						peak.visibility="true" 
						value.color="mid_channel" />
				</ledmeter>
			</hbox>
			
			<!-- Graph -->
			<graph width.min="640" height.min="340" expand="true" fill="true">
				<origin hpos="-1" vpos="-1" visible="false" />
				
				<!-- Gray grid -->
				<ui:attributes ox="0" oy="1">
					<ui:for id="f" first="20" last="90" step="10">
						<marker v="${f}" color="graph_alt_1" />
					</ui:for>
					<ui:for id="f" first="200" last="900" step="100">
						<marker v="${f}" color="graph_alt_1" />
					</ui:for>
					<ui:for id="f" first="2000" last="9000" step="1000">
						<marker v="${f}" color="graph_alt_1" />
					</ui:for>
					<marker value="20000" color="graph_alt_1" />
				</ui:attributes>
				<ui:for id="g" first="-36" last="36" step="24">
					<marker v="${g} db" ox="1" oy="0" color="graph_alt_1" />
				</ui:for>
				<ui:for id="g" first="-18" last="18" step="12">
					<marker v="${g} db" ox="1" oy="0" color="graph_alt_1" visibility=":zoom le -18 db" />
				</ui:for>
				<ui:for id="g" first="-9" last="9" step="6">
					<marker v="${g} db" ox="1" oy="0" color="graph_alt_1" visibility=":zoom le -33 db" />
				</ui:for>
				
				<!-- Yellow grid -->
				<ui:attributes ox="0" oy="1" color="graph_sec">
					<marker v="100" />
					<marker v="1000" />
					<marker v="10000" />
				</ui:attributes>
				<ui:attributes ox="1" oy="0" color="graph_sec">
					<marker v="+24 db" />
					<marker v="0 db" />
					<marker v="-24 db" />
				</ui:attributes>
				
				<!-- Meshes -->
				<ui:for id="i" first="0" last=":num_filters - 1">
					<marker id="f_${i}" ox="0" oy="1" color="eq_base" color.hue=":hue_${i}" visibility=":fv_${i}" />
					<marker id="g_${i}" ox="1" oy="0" color="eq_base" color.hue=":hue_${i}" visibility=":fv_${i}" />
				</ui:for>
				<ui:for id="i" first="0" last=":num_filters - 1">
					<mesh id="agf_${i}" width="2" 
						color="eq_base" color.hue=":hue_${i}" fill="true"
						fcolor="eq_base" fcolor.hue=":hue_${i}" fcolor.a="0.8"
						visibility=":fv_${i}" smooth="true" />
				</ui:for>

				<mesh id="fftg" width="2" color="mid_channel" visibility=":fftv" />
				<mesh id="ag" width="3" color="mid_channel" smooth="true" />
				<ui:for id="i" first="0" last=":num_filters - 1">
					<ui:attributes pointer="drag"
						color="eq_base" hover.color="eq_base"
						bcolor="eq_base" hover.bcolor="eq_base"
						x.editable="true" y.editable="true" z.editable="true">
						<dot x.id="f_${i}" y.id="g_${i}" z.id="q_${i}"
							color.hue=":hue_${i}" hover.color.hue=":hue_${i}"
							bcolor.hue=":hue_${i}" hover.bcolor.hue=":hue_${i}"
							visibility=":fv_${i}"
						/>
					</ui:attributes>
				</ui:for>
				
				<!-- Boundaries -->
				<marker ox="2" oy="0" v="1" color="graph_prim" /> <!-- +48 dB -->
				<marker ox="0" oy="1" v="24000" color="graph_prim" />
				
				<!-- Axis -->
				<axis min="10" max="24000" color="graph_prim" angle="0.0" log="true" />
				<axis min="-48 db / :zoom" max="48 db * :zoom" color="graph_prim" angle="0.5" log="true" /> <!-- -48..+48 dB -->
				<axis min="-1" max="1" visible="false" angle="0.5" />
				
				<!-- Text -->
				<ui:attributes ox="0" oy="2" y="0" halign="1" valign="1"> 
					<text x="10" text="graph.units.hz" />
					<text x="100" text="100" />
					<text x="1000" text="graph.values.x_k" text:value="1" />
					<text x="10000" text="graph.values.x_k" text:value="10" />
				</ui:attributes>
				<ui:attributes x="10" halign="1">
					<text y="36 db" text="+36" valign="-1" />
					<text y="24 db" text="+24" valign="-1" />
					<text y="12 db" text="+12" valign="-1" />
					<text y="0 db" text="0" valign="1" />
					<text y="-12 db" text="-12" valign="1" />
					<text y="-24 db" text="-24" valign="1" />
					<text y="-36 db" text="-36" valign="1" />
					<text y="1" ox="0" oy="2" text="graph.units.db" valign="-1" />
				</ui:attributes>
				<ui:attributes x="10" halign="1" visibility=":zoom le -18 db">
					<text y="18 db" text="+18" valign="-1" />
					<text y="6 db" text="+6" valign="-1" />
					<text y="-6 db" text="-6" valign="1" />
					<text y="-18 db" text="-18" valign="1" />
				</ui:attributes>
				<ui:attributes x="10" halign="1" visibility=":zoom le -33 db">
					<text y="9 db" text="+9" valign="-1" />
					<text y="3 db" text="+3" valign="-1" />
					<text y="-3 db" text="-3" valign="1" />
					<text y="-9 db" text="-9" valign="1" />
				</ui:attributes>
			</graph>
			<hbox spacing="4">
				<label text="labels.mode" />
				<combo id="mode" />
				<void expand="true" />
				<label text="labels.graphs.spectrum" />
			</hbox>
		</vbox>
		<vbox>
			<label font.name="lsp-icons" font.size="12" font.antialias="true" text="E" color="text_icon" padding.bottom="4" padding.top="4"/>
			<fader id="zoom" angle="1" vexpand="true" />
			<value id="zoom" width="40"/>
		</vbox>
		<vbox spacing="4">
			<group text="groups.signal" expand="true">
				<grid rows="3" cols="2" hspacing="4">
					<knob id="g_in" />
					<vbox vfill="false">
						<label text="labels.input" halign="0" />
						<value id="g_in" same_line="true" halign="0" />
					</vbox>
					
					<knob id="g_out" />
					<vbox vfill="false">
						<label text="labels.output" expand="true" halign="0" />
						<value id="g_out" same_line="true" halign="0" />
					</vbox>
					
					<knob id="frqs" scale_color="middle_channel" />
					<vbox vfill="false">
						<label text="labels.chan.pitch" halign="0" />
						<value id="frqs" same_line="true" halign="0" />
					</vbox>
				</grid>
			</group>
			<group text="groups.analysis" expand="true">
				<vbox>
					<label text="labels.fft.fft" halign="0" />
					<combo id="fft" fill="true" />
					
					<grid rows="2" cols="2" transpose="false" expand="true" hspacing="4" >
						<knob id="react" size="20" />
						<vbox vfill="false">
							<label text="labels.metering.reactivity" halign="0" />
							<value id="react" same_line="true" halign="0" />
						</vbox>
						
						<knob id="shift" size="20" />
						<vbox vfill="false">
							<label text="labels.metering.shift" halign="0" />
							<value id="shift" same_line="true" halign="0" />
						</vbox>
					</grid>
				</vbox>
			</group>
		</vbox>
		<cell cols="3">
			<cgroup id="fsel">
				<!-- N blocks of filters -->
				<ui:for id="f" first="0" last=":num_blocks - 1">
					<grid transpose="true" rows="8" cols="17" hspacing="2">
						<label text="labels.specials.num" fill="true" halign="0" />
						<label text="labels.filter" fill="true" halign="0" />
						<label text="labels.mode" fill="true" halign="0" />
						<label text="labels.slope" fill="true" halign="0" />
						<cell rows="2"><label text="labels.freq_gain:hz_db" halign="0" /></cell>
						<cell rows="2"><label text="labels.q_hue" halign="0" /></cell>
						
						<!-- Filters -->
						<ui:for id="i" first=":f*8" last=":f*8+7">
							<ui:set id="ch" value="_${i}" />
							<cell cols="2"><label text="${i}" /></cell>
							<cell cols="2" fill="true" pad_bottom="1"><combo id="ft${ch}"  fill="true" /></cell>
							<cell cols="2" fill="true" ><combo id="fm${ch}"  fill="true" /></cell>
							<combo id="s${ch}" fill="true" />
							<knob id="f${ch}" scolor.hue=":hue${ch}" size="20" />
							<value id="f${ch}" detailed="false" precision="1" />
							<knob id="q${ch}" scolor.hue=":hue${ch}" size="20" />
							<value id="q${ch}" detailed="false" />
							<grid rows="2" cols="2" fill="false">
								<button id="xs${ch}" led="true" size="12" color="green" />
								<button id="xm${ch}" led="true" size="12" color="red" />
								<label text="labels.chan.S_olo" font_size="8" />
								<label text="labels.chan.M_ute" font_size="8" />
							</grid>
							<knob id="g${ch}" scolor.hue=":hue${ch}" size="20" />
							<value id="g${ch}" detailed="false" />
							<knob id="hue${ch}" scolor.hue=":hue${ch}" size="16" />
							<value id="hue${ch}" detailed="false" />
						</ui:for>
					</grid>
				</ui:for>
			</cgroup>
		</cell>
	</grid>
</plugin>